<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electricity Bill C Program</title>
    <style>
        body {
            font-family: monospace;
            background-color: #f5f5f5;
            color: #111;
            padding: 20px;
        }
        pre {
            background-color: #272822;
            color: #f8f8f2;
            padding: 20px;
            overflow-x: auto;
            border-radius: 8px;
        }
        code {
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Electricity Bill C Program</h1>
    <pre><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main() {
    char names[3][50];
    char address[3][100];
    char phone[3][20];
    int last4digits[3];
    int previousMonthUnits[3];

    FILE *db = fopen("database.txt", "w");
    if(db == NULL){
        printf("Error creating database file!\n");
        return 1;
    }

    fprintf(db, "Ravi Kumar\n");
    fprintf(db, "Jaipur, Rajasthan\n");
    fprintf(db, "9876543210\n");
    fprintf(db, "1234\n");
    fprintf(db, "150\n");

    fprintf(db, "Suman Sharma\n");
    fprintf(db, "Delhi, India\n");
    fprintf(db, "8765432109\n");
    fprintf(db, "4567\n");
    fprintf(db, "220\n");

    fprintf(db, "Ankit Verma\n");
    fprintf(db, "Mumbai, Maharashtra\n");
    fprintf(db, "9988776655\n");
    fprintf(db, "7890\n");
    fprintf(db, "180\n");

    fclose(db);

    db = fopen("database.txt", "r");
    if(db == NULL){
        printf("Error opening database file!\n");
        return 1;
    }

    for(int i = 0; i &lt; 3; i++){
        fgets(names[i], 50, db);
        fgets(address[i], 100, db);
        fgets(phone[i], 20, db);
        fscanf(db, "%d\n", &last4digits[i]);
        fscanf(db, "%d\n", &previousMonthUnits[i]);
    }

    fclose(db);

    for(int i = 0; i &lt; 3; i++){
        names[i][strcspn(names[i], "\n")] = '\0';
        address[i][strcspn(address[i], "\n")] = '\0';
        phone[i][strcspn(phone[i], "\n")] = '\0';
    }

    int inputID, index = -1;
    do {
        printf("Enter last 4 digits of your consumer number: ");
        scanf("%d", &amp;inputID);

        index = -1;
        for(int i = 0; i &lt; 3; i++){
            if(last4digits[i] == inputID){
                index = i;
                break;
            }
        }

        if(index == -1){
            printf("Invalid number! Please try again.\n");
        }

    } while(index == -1);

    printf("\nCustomer Found!\nName: %s\nAddress: %s\nPhone: %s\n",
           names[index], address[index], phone[index]);

    int prevReading = previousMonthUnits[index];
    int currentReading;
    printf("\nPrevious month reading: %d units\nEnter current month meter reading: ", prevReading);
    scanf("%d", &amp;currentReading);

    if(currentReading &lt; prevReading){
        printf("\nInvalid reading! Current must be &gt;= previous\n");
        return 0;
    }

    int units = currentReading - prevReading;

    int category;
    do {
        printf("\nSelect Category:\n");
        printf("1. Domestic\n2. Commercial\n3. Industrial\n4. Agricultural\n");
        printf("Enter your choice: ");
        scanf("%d", &amp;category);

        if(category &lt; 1 || category &gt; 4){
            printf("Invalid category! Please enter 1-4.\n");
        }

    } while(category &lt; 1 || category &gt; 4);

    char catName[20];
    float fixedCharge, rate1, rate2, rate3;
    int slab1, slab2;

    if(category == 1){
        strcpy(catName, "Domestic");
        fixedCharge = 100;
        slab1 = 100; slab2 = 100;
        rate1 = 3.0; rate2 = 4.5; rate3 = 6.0;
    } else if(category == 2){
        strcpy(catName, "Commercial");
        fixedCharge = 300;
        slab1 = 100; slab2 = 200;
        rate1 = 5.0; rate2 = 6.5; rate3 = 8.0;
    } else if(category == 3){
        strcpy(catName, "Industrial");
        fixedCharge = 500;
        slab1 = 200; slab2 = 0;
        rate1 = 8.0; rate2 = 9.5; rate3 = 0;
    } else if(category == 4){
        strcpy(catName, "Agricultural");
        fixedCharge = 50;
        slab1 = 100; slab2 = 0;
        rate1 = 0; rate2 = 2.5; rate3 = 0;
    } else{
        printf("Invalid category!\n");
        return 0;
    }

    int slabUnits[3] = {slab1, slab2, 0};
    float rate[3] = {rate1, rate2, rate3};
    float slabCharge[3] = {0,0,0};
    int remaining = units;
    float bill = 0;

    for(int i = 0; i &lt; 3; i++){
        if(remaining &lt;= 0) break;
        int currentSlab = (slabUnits[i] == 0 || remaining &lt; slabUnits[i]) ? remaining : slabUnits[i];
        slabCharge[i] = currentSlab * rate[i];
        bill += slabCharge[i];
        remaining -= currentSlab;
    }

    float subtotal = bill + fixedCharge;
    float tax = subtotal * 0.05;
    float totalBill = subtotal + tax;

    int latePayment;
    float penalty = 0;
    printf("Is the payment late? (1 = Yes, 0 = No): ");
    scanf("%d", &amp;latePayment);

    if(latePayment == 1){
        penalty = totalBill * 0.10;
        totalBill += penalty;
    }

    printf("\n----------------------------------\n");
    printf("               BILL\n");
    printf("----------------------------------\n");
    printf("Name             : %s\n", names[index]);
    printf("Address          : %s\n", address[index]);
    printf("Phone            : %s\n", phone[index]);
    printf("Category         : %s\n", catName);
    printf("----------------------------------\n");
    printf("Prev Reading     : %d\n", prevReading);
    printf("Current Reading  : %d\n", currentReading);
    printf("Units Consumed   : %d\n", units);
    printf("----------------------------------\n");
    printf("Slab-wise Charges:\n");
    printf("Slab 1          @ %.1f  = Rs %.2f\n", rate[0], slabCharge[0]);
    printf("Slab 2          @ %.1f  = Rs %.2f\n", rate[1], slabCharge[1]);
    if(rate[2] &gt; 0)
        printf("Slab 3          @ %.1f  = Rs %.2f\n", rate[2], slabCharge[2]);
    printf("----------------------------------\n");
    printf("Energy Charge    : Rs %.2f\n", bill);
    printf("Fixed Charge     : Rs %.2f\n", fixedCharge);
    printf("Tax (5%%)         : Rs %.2f\n", tax);
    if(latePayment == 1)
        printf("Late Penalty     : Rs %.2f\n", penalty);
    printf("----------------------------------\n");
    printf("Total Payable    : Rs %.2f\n", totalBill);
    printf("----------------------------------\n");

    FILE *fptr;
    fptr = fopen("print.txt", "w");
    if(fptr ==  NULL){
        printf("Not able to find the file ");
    }

    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "               BILL\n");
    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "Name             : %s\n", names[index]);
    fprintf(fptr, "Address          : %s\n", address[index]);
    fprintf(fptr, "Phone            : %s\n", phone[index]);
    fprintf(fptr, "Category         : %s\n", catName);
    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "Prev Reading     : %d\n", prevReading);
    fprintf(fptr, "Current Reading  : %d\n", currentReading);
    fprintf(fptr, "Units Consumed   : %d\n", units);
    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "Slab-wise Charges:\n");
    fprintf(fptr, "Slab 1          @ %.1f  = Rs %.2f\n", rate[0], slabCharge[0]);
    fprintf(fptr, "Slab 2          @ %.1f  = Rs %.2f\n", rate[1], slabCharge[1]);
    if(rate[2] &gt; 0)
        fprintf(fptr, "Slab 3          @ %.1f  = Rs %.2f\n", rate[2], slabCharge[2]);
    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "Energy Charge    : Rs %.2f\n", bill);
    fprintf(fptr, "Fixed Charge     : Rs %.2f\n", fixedCharge);
    fprintf(fptr, "Tax (5%%)         : Rs %.2f\n", tax);
    if(latePayment == 1)
        fprintf(fptr, "Late Penalty     : Rs %.2f\n", penalty);
    fprintf(fptr, "----------------------------------\n");
    fprintf(fptr, "Total Payable    : Rs %.2f\n", totalBill);
    fprintf(fptr, "----------------------------------\n");

    fclose(fptr);
    printf("\nBill saved to bill.txt successfully!\n");

    return 0;
}
</code></pre>
</body>
</html>
